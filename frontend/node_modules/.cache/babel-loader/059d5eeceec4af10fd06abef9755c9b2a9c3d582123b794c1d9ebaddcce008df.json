{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\duyan\\\\trangsucvn\\\\frontend\\\\src\\\\context\\\\CartContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useContext, useRef } from \"react\";\nimport { AuthContext } from \"./AuthContext\"; // Import Ä‘á»ƒ láº¥y user/token\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [cart, setCart] = useState([]);\n  const authContext = useContext(AuthContext); // Láº¥y full AuthContext\n  const {\n    user,\n    token\n  } = authContext || {}; // Fallback náº¿u chÆ°a ready\n  const prevUserIdRef = useRef(user === null || user === void 0 ? void 0 : user._id); // Track user trÆ°á»›c Ä‘á»ƒ detect switch\n\n  // Load local cart khi init (cháº¡y Ä‘áº§u tiÃªn)\n  useEffect(() => {\n    console.log(\"ðŸ”„ Loading local cart...\"); // Debug\n    const savedCart = localStorage.getItem(\"cart\");\n    if (savedCart) {\n      const parsedCart = JSON.parse(savedCart);\n      setCart(parsedCart);\n      console.log(\"ðŸ“¦ Local cart loaded:\", parsedCart);\n    }\n  }, []);\n\n  // Sync localStorage khi cart thay Ä‘á»•i\n  useEffect(() => {\n    if (cart.length > 0) {\n      // Chá»‰ sync náº¿u cÃ³ data\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      console.log(\"ðŸ’¾ Synced to localStorage:\", cart.length, \"items\");\n    }\n  }, [cart]);\n\n  // Fetch & merge cart tá»« server náº¿u logged in (cháº¡y sau khi Auth ready)\n  useEffect(() => {\n    console.log(\"ðŸ‘¤ User status:\", user ? `Logged in: ${user._id}` : \"Guest\"); // Debug user ID\n    if (user && token) {\n      if (prevUserIdRef.current && prevUserIdRef.current !== user._id) {\n        // Switch user: Clear local cÅ©\n        localStorage.removeItem(\"cart\");\n        setCart([]);\n        console.log(\"ðŸ”„ Switched user, cleared old cart\");\n      }\n      prevUserIdRef.current = user._id;\n      console.log(\"ðŸŒ Fetching server cart for user:\", user._id);\n      fetchCartFromServer();\n    } else {\n      // Logout: Giá»¯ local cho guest\n      prevUserIdRef.current = null;\n      console.log(\"ðŸ›’ Guest mode: Keep local only\");\n    }\n  }, [user, token]); // Trigger má»—i khi user ID thay Ä‘á»•i (switch login)\n\n  const fetchCartFromServer = async () => {\n    try {\n      const res = await axios.get(\"http://localhost:5000/api/cart\");\n      console.log(\"ðŸ“¡ Server cart response:\", res.data); // Debug\n      if (res.data && res.data.items && res.data.items.length > 0) {\n        // Map server items báº±ng product_id (string)\n        const serverItemsMap = new Map(res.data.items.map(item => [item.product_id.toString(), {\n          ...item,\n          _id: item.product_id.toString()\n        }]) // Normalize _id cho merge\n        );\n\n        // Merge: Local + Server (Æ°u tiÃªn server quantity, thÃªm local náº¿u server miss)\n        let mergedCart = [...cart]; // Báº¯t Ä‘áº§u tá»« local\n        serverItemsMap.forEach((serverItem, id) => {\n          const localIndex = mergedCart.findIndex(item => item._id === id);\n          if (localIndex !== -1) {\n            // Sync quantity tá»« server\n            mergedCart[localIndex] = {\n              ...mergedCart[localIndex],\n              quantity: serverItem.quantity\n            };\n          } else {\n            // ThÃªm tá»« server\n            mergedCart.push({\n              _id: serverItem.product_id.toString(),\n              name: serverItem.name,\n              price: serverItem.price,\n              imageUrl: serverItem.imageUrl || \"\",\n              // Náº¿u server cÃ³\n              quantity: serverItem.quantity\n            });\n          }\n        });\n        setCart(mergedCart);\n        console.log(\"ðŸ”„ Merged cart:\", mergedCart);\n      } else {\n        // Server rá»—ng: Giá»¯ local (khÃ´ng clear!)\n        console.log(\"ðŸ—‘ï¸ Server cart empty, keeping local\");\n      }\n    } catch (error) {\n      var _error$response;\n      console.error(\"âŒ Lá»—i fetch cart tá»« server:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      // KhÃ´ng clear local náº¿u lá»—i\n    }\n  };\n\n  // Helper sync to server (Äá»ŠNH NGHÄ¨A TRÆ¯á»šC Äá»‚ TRÃNH ESLINT Lá»–I)\n  const syncToServer = async (action, productId = null, quantity = null) => {\n    if (!user || !token) {\n      console.log(\"ðŸ‘¤ Guest: Skip sync to server\"); // Debug\n      return;\n    }\n    console.log(`ðŸŒ Syncing ${action} for product ${productId}, qty ${quantity}`); // Debug\n\n    try {\n      let response;\n      switch (action) {\n        case \"update\":\n          response = await axios.post(\"http://localhost:5000/api/cart/add\", {\n            productId,\n            quantity\n          });\n          break;\n        case \"remove\":\n          response = await axios.delete(`http://localhost:5000/api/cart/remove/${productId}`);\n          break;\n        case \"clear\":\n          response = await axios.put(\"http://localhost:5000/api/cart/clear\");\n          break;\n        default:\n          return;\n      }\n      console.log(\"âœ… Sync success:\", response.status); // Debug\n    } catch (error) {\n      var _error$response2, _error$response3;\n      console.error(`âŒ Sync ${action} failed:`, (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status, ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error.message);\n      // Optional: Alert user hoáº·c rollback local (nhÆ°ng Ä‘á»ƒ mÆ°á»£t thÃ¬ khÃ´ng)\n    }\n  };\n\n  // BÃ‚Y GIá»œ CÃC FUNCTION NÃ€Y Gá»ŒI syncToServer Sáº¼ OK (VÃŒ ÄÃƒ DEFINE TRÆ¯á»šC)\n  const addToCart = product => {\n    const existing = cart.find(item => item._id === product._id);\n    let newCart;\n    if (existing) {\n      newCart = cart.map(item => item._id === product._id ? {\n        ...item,\n        quantity: item.quantity + 1\n      } : item);\n    } else {\n      newCart = [...cart, {\n        ...product,\n        quantity: 1\n      }];\n    }\n    setCart(newCart);\n    syncToServer(\"update\", product._id, existing ? existing.quantity + 1 : 1);\n  };\n  const removeFromCart = productId => {\n    const newCart = cart.filter(item => item._id !== productId);\n    setCart(newCart);\n    syncToServer(\"remove\", productId);\n  };\n  const updateQuantity = (productId, quantity) => {\n    if (quantity <= 0) {\n      removeFromCart(productId);\n      return;\n    }\n    const newCart = cart.map(item => item._id === productId ? {\n      ...item,\n      quantity\n    } : item);\n    setCart(newCart);\n    syncToServer(\"update\", productId, quantity);\n  };\n  const clearCart = () => {\n    setCart([]);\n    syncToServer(\"clear\");\n  };\n  const getTotal = () => {\n    return cart.reduce((total, item) => total + item.price * item.quantity, 0);\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      addToCart,\n      removeFromCart,\n      updateQuantity,\n      clearCart,\n      getTotal\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 196,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"dHulgoqqKRy5tdgEnDMd741XNQc=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","useRef","AuthContext","axios","jsxDEV","_jsxDEV","CartContext","CartProvider","children","_s","cart","setCart","authContext","user","token","prevUserIdRef","_id","console","log","savedCart","localStorage","getItem","parsedCart","JSON","parse","length","setItem","stringify","current","removeItem","fetchCartFromServer","res","get","data","items","serverItemsMap","Map","map","item","product_id","toString","mergedCart","forEach","serverItem","id","localIndex","findIndex","quantity","push","name","price","imageUrl","error","_error$response","response","message","syncToServer","action","productId","post","delete","put","status","_error$response2","_error$response3","addToCart","product","existing","find","newCart","removeFromCart","filter","updateQuantity","clearCart","getTotal","reduce","total","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/duyan/trangsucvn/frontend/src/context/CartContext.js"],"sourcesContent":["import React, {\r\n  createContext,\r\n  useState,\r\n  useEffect,\r\n  useContext,\r\n  useRef,\r\n} from \"react\";\r\nimport { AuthContext } from \"./AuthContext\"; // Import Ä‘á»ƒ láº¥y user/token\r\nimport axios from \"axios\";\r\n\r\nexport const CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cart, setCart] = useState([]);\r\n  const authContext = useContext(AuthContext); // Láº¥y full AuthContext\r\n  const { user, token } = authContext || {}; // Fallback náº¿u chÆ°a ready\r\n  const prevUserIdRef = useRef(user?._id); // Track user trÆ°á»›c Ä‘á»ƒ detect switch\r\n\r\n  // Load local cart khi init (cháº¡y Ä‘áº§u tiÃªn)\r\n  useEffect(() => {\r\n    console.log(\"ðŸ”„ Loading local cart...\"); // Debug\r\n    const savedCart = localStorage.getItem(\"cart\");\r\n    if (savedCart) {\r\n      const parsedCart = JSON.parse(savedCart);\r\n      setCart(parsedCart);\r\n      console.log(\"ðŸ“¦ Local cart loaded:\", parsedCart);\r\n    }\r\n  }, []);\r\n\r\n  // Sync localStorage khi cart thay Ä‘á»•i\r\n  useEffect(() => {\r\n    if (cart.length > 0) {\r\n      // Chá»‰ sync náº¿u cÃ³ data\r\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n      console.log(\"ðŸ’¾ Synced to localStorage:\", cart.length, \"items\");\r\n    }\r\n  }, [cart]);\r\n\r\n  // Fetch & merge cart tá»« server náº¿u logged in (cháº¡y sau khi Auth ready)\r\n  useEffect(() => {\r\n    console.log(\"ðŸ‘¤ User status:\", user ? `Logged in: ${user._id}` : \"Guest\"); // Debug user ID\r\n    if (user && token) {\r\n      if (prevUserIdRef.current && prevUserIdRef.current !== user._id) {\r\n        // Switch user: Clear local cÅ©\r\n        localStorage.removeItem(\"cart\");\r\n        setCart([]);\r\n        console.log(\"ðŸ”„ Switched user, cleared old cart\");\r\n      }\r\n      prevUserIdRef.current = user._id;\r\n      console.log(\"ðŸŒ Fetching server cart for user:\", user._id);\r\n      fetchCartFromServer();\r\n    } else {\r\n      // Logout: Giá»¯ local cho guest\r\n      prevUserIdRef.current = null;\r\n      console.log(\"ðŸ›’ Guest mode: Keep local only\");\r\n    }\r\n  }, [user, token]); // Trigger má»—i khi user ID thay Ä‘á»•i (switch login)\r\n\r\n  const fetchCartFromServer = async () => {\r\n    try {\r\n      const res = await axios.get(\"http://localhost:5000/api/cart\");\r\n      console.log(\"ðŸ“¡ Server cart response:\", res.data); // Debug\r\n      if (res.data && res.data.items && res.data.items.length > 0) {\r\n        // Map server items báº±ng product_id (string)\r\n        const serverItemsMap = new Map(\r\n          res.data.items.map((item) => [\r\n            item.product_id.toString(),\r\n            { ...item, _id: item.product_id.toString() },\r\n          ]) // Normalize _id cho merge\r\n        );\r\n\r\n        // Merge: Local + Server (Æ°u tiÃªn server quantity, thÃªm local náº¿u server miss)\r\n        let mergedCart = [...cart]; // Báº¯t Ä‘áº§u tá»« local\r\n        serverItemsMap.forEach((serverItem, id) => {\r\n          const localIndex = mergedCart.findIndex((item) => item._id === id);\r\n          if (localIndex !== -1) {\r\n            // Sync quantity tá»« server\r\n            mergedCart[localIndex] = {\r\n              ...mergedCart[localIndex],\r\n              quantity: serverItem.quantity,\r\n            };\r\n          } else {\r\n            // ThÃªm tá»« server\r\n            mergedCart.push({\r\n              _id: serverItem.product_id.toString(),\r\n              name: serverItem.name,\r\n              price: serverItem.price,\r\n              imageUrl: serverItem.imageUrl || \"\", // Náº¿u server cÃ³\r\n              quantity: serverItem.quantity,\r\n            });\r\n          }\r\n        });\r\n\r\n        setCart(mergedCart);\r\n        console.log(\"ðŸ”„ Merged cart:\", mergedCart);\r\n      } else {\r\n        // Server rá»—ng: Giá»¯ local (khÃ´ng clear!)\r\n        console.log(\"ðŸ—‘ï¸ Server cart empty, keeping local\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\r\n        \"âŒ Lá»—i fetch cart tá»« server:\",\r\n        error.response?.data || error.message\r\n      );\r\n      // KhÃ´ng clear local náº¿u lá»—i\r\n    }\r\n  };\r\n\r\n  // Helper sync to server (Äá»ŠNH NGHÄ¨A TRÆ¯á»šC Äá»‚ TRÃNH ESLINT Lá»–I)\r\n  const syncToServer = async (action, productId = null, quantity = null) => {\r\n    if (!user || !token) {\r\n      console.log(\"ðŸ‘¤ Guest: Skip sync to server\"); // Debug\r\n      return;\r\n    }\r\n\r\n    console.log(\r\n      `ðŸŒ Syncing ${action} for product ${productId}, qty ${quantity}`\r\n    ); // Debug\r\n\r\n    try {\r\n      let response;\r\n      switch (action) {\r\n        case \"update\":\r\n          response = await axios.post(\"http://localhost:5000/api/cart/add\", {\r\n            productId,\r\n            quantity,\r\n          });\r\n          break;\r\n        case \"remove\":\r\n          response = await axios.delete(\r\n            `http://localhost:5000/api/cart/remove/${productId}`\r\n          );\r\n          break;\r\n        case \"clear\":\r\n          response = await axios.put(\"http://localhost:5000/api/cart/clear\");\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n      console.log(\"âœ… Sync success:\", response.status); // Debug\r\n    } catch (error) {\r\n      console.error(\r\n        `âŒ Sync ${action} failed:`,\r\n        error.response?.status,\r\n        error.response?.data || error.message\r\n      );\r\n      // Optional: Alert user hoáº·c rollback local (nhÆ°ng Ä‘á»ƒ mÆ°á»£t thÃ¬ khÃ´ng)\r\n    }\r\n  };\r\n\r\n  // BÃ‚Y GIá»œ CÃC FUNCTION NÃ€Y Gá»ŒI syncToServer Sáº¼ OK (VÃŒ ÄÃƒ DEFINE TRÆ¯á»šC)\r\n  const addToCart = (product) => {\r\n    const existing = cart.find((item) => item._id === product._id);\r\n    let newCart;\r\n    if (existing) {\r\n      newCart = cart.map((item) =>\r\n        item._id === product._id\r\n          ? { ...item, quantity: item.quantity + 1 }\r\n          : item\r\n      );\r\n    } else {\r\n      newCart = [...cart, { ...product, quantity: 1 }];\r\n    }\r\n    setCart(newCart);\r\n    syncToServer(\"update\", product._id, existing ? existing.quantity + 1 : 1);\r\n  };\r\n\r\n  const removeFromCart = (productId) => {\r\n    const newCart = cart.filter((item) => item._id !== productId);\r\n    setCart(newCart);\r\n    syncToServer(\"remove\", productId);\r\n  };\r\n\r\n  const updateQuantity = (productId, quantity) => {\r\n    if (quantity <= 0) {\r\n      removeFromCart(productId);\r\n      return;\r\n    }\r\n    const newCart = cart.map((item) =>\r\n      item._id === productId ? { ...item, quantity } : item\r\n    );\r\n    setCart(newCart);\r\n    syncToServer(\"update\", productId, quantity);\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCart([]);\r\n    syncToServer(\"clear\");\r\n  };\r\n\r\n  const getTotal = () => {\r\n    return cart.reduce((total, item) => total + item.price * item.quantity, 0);\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        cart,\r\n        addToCart,\r\n        removeFromCart,\r\n        updateQuantity,\r\n        clearCart,\r\n        getTotal,\r\n      }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}